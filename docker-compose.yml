version: '3.8'

services:
  # Frontend - Nginx serve static files + reverse proxy to backend
  trucca-web:
    build:
      context: .
      dockerfile: Dockerfile
    image: haind46/trucca-web:latest
    container_name: trucca-web
    restart: unless-stopped
    # Dùng network_mode host để truy cập backend ở localhost:8002
    network_mode: "host"
    # Load environment variables từ file
    env_file:
      - trucca-web.env
    volumes:
      # Mount nginx.conf để dễ sửa mà không cần rebuild
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
      # Mount logs ra ngoài (optional)
      - ./logs/nginx:/var/log/nginx

